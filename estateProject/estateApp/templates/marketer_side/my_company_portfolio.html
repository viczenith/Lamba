{% extends 'marketer_base.html' %}
{% load static %}
{% block content %}
<main class="main">
  <div class="pagetitle">
    <h1>{{ company.company_name }} — My Portfolio</h1>
  </div>

  <div class="row">
    <div class="col-md-8">
      <div class="card mb-3">
        <div class="card-body">
          <h5>Clients</h5>
          {% if clients %}
            <ul class="list-group">
              {% for c in clients %}
                <li class="list-group-item">{{ c.full_name }} ({{ c.email }})</li>
              {% endfor %}
            </ul>
          {% else %}
            <p class="text-muted">No clients found for your transactions in this company.</p>
          {% endif %}
        </div>
      </div>

      <div class="card">
        <div class="card-body">
          <h5>Transactions</h5>
          {% if transactions %}
            <table class="table table-striped">
              <thead><tr><th>Date</th><th>Client</th><th>Amount</th><th>Reference</th></tr></thead>
              <tbody>
                {% for t in transactions %}
                  <tr>
                    <td>{{ t.transaction_date|date:"d M Y" }}</td>
                    <td>{{ t.client.full_name }}</td>
                    <td>₦{{ t.total_amount }}</td>
                    <td>{{ t.reference_code }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          {% else %}
            <p class="text-muted">No transactions yet.</p>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card">
        <div class="card-body">
          <h5>Summary</h5>
          <p>Total value: ₦{{ total_value|default:0 }}</p>
        </div>
      </div>
    </div>
  </div>
</main>
{% endblock %}